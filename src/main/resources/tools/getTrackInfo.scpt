tell application "Music"if it is running thenif player state is playing or player state is paused thenset currentTrack to the current trackif currentTrack is not missing value thenset trackName to the name of currentTrackset artistName to the artist of currentTrackset albumName to the album of currentTrackset trackDuration to duration of currentTrack as Integerset playerPosition to (get player position) as Integerset playerState to (get player state)set trackInfo to "{\"title\": \"" & trackName & "\", \"artist\": \"" & artistName & "\", \"album\": \"" & albumName & "\", \"position\": \"" & playerPosition & "\", \"duration\": \"" & trackDuration & "\", \"state\": \"" & playerState & "\"}"elseset trackInfo to "No track currently playing"end ifelseset trackInfo to "No track currently playing"end ifelseset trackInfo to "Apple Music is not running"end ifend tellon base64encode(str) return do shell script "echo '" & str & "' | openssl base64 -e "end base64encodeset output to base64encode(trackInfo)return output